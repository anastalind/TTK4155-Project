\hypertarget{joystick_8c}{}\section{Node1/joystick.c File Reference}
\label{joystick_8c}\index{Node1/joystick.\+c@{Node1/joystick.\+c}}


C-\/file for the joystick on the U\+S\+B-\/multiboards behaviour.  


{\ttfamily \#include \char`\"{}joystick.\+h\char`\"{}}\\*
Include dependency graph for joystick.\+c\+:
% FIG 0
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{joystick_8c_a7ec3b74a77ec575359b57d254bb07eb6}{X\+\_\+\+A\+X\+I\+S\+\_\+\+C\+H\+A\+N\+N\+EL}~5
\item 
\#define \hyperlink{joystick_8c_a277601f3487707a05eb9ba3d484b11d2}{Y\+\_\+\+A\+X\+I\+S\+\_\+\+C\+H\+A\+N\+N\+EL}~4
\item 
\#define \hyperlink{joystick_8c_ad04b5a9527903c28f45d06a3a4d444fd}{S\+L\+A\+CK}~2
\item 
\#define \hyperlink{joystick_8c_a452e6d5aa0923f60e4a70645c7a0bcba}{R\+E\+S\+O\+L\+U\+T\+I\+O\+N\+\_\+\+S\+T\+A\+RT}~0
\item 
\#define \hyperlink{joystick_8c_aee830cbf12bce2bc11b437971fec8cae}{R\+E\+S\+O\+L\+U\+T\+I\+O\+N\+\_\+\+E\+ND}~255
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{joystick_8c_a4a1ff77a1eb869df532d55d5d4562419}{get\+\_\+quadrant} (\hyperlink{structjoystick}{joystick} position)
\item 
bool \hyperlink{joystick_8c_a8f18a9c60a5221fc41b6af4ec8ce8bbd}{is\+\_\+vertical\+\_\+direction} (\hyperlink{structjoystick}{joystick} position)
\item 
bool \hyperlink{joystick_8c_a462650871e579842e50c0b28f39f57ad}{button\+\_\+not\+\_\+pressed} (void)
\item 
void \hyperlink{joystick_8c_a93286350afb09bf09a900d6a01d3ca37}{joystick\+\_\+calibrate} (void)
\item 
\hyperlink{structjoystick}{joystick} \hyperlink{joystick_8c_ab143fc440ad8744d48c20fc16e586022}{joystick\+\_\+position} (void)
\item 
\hyperlink{joystick_8h_a99f26e6ee9fcd62f75203b5402df8098}{direction} \hyperlink{joystick_8c_aa6f4a77257f14ed7f8fdd675d6a2697b}{joystick\+\_\+direction} (void)
\item 
bool \hyperlink{joystick_8c_ae42781368d7a1cef170bcec7a69e1665}{is\+\_\+button\+\_\+pressed} ()
\item 
void \hyperlink{joystick_8c_a502c05d9e96f3d58e88d64896bda20df}{game\+\_\+controller\+\_\+\+C\+A\+N\+\_\+transmit} (\hyperlink{structjoystick}{joystick} position, \hyperlink{struct_sliders}{Sliders} \hyperlink{slider_8h_a2331c701e5ef52a247d8d0dfdca7ec9e}{slider\+\_\+position})
\item 
void \hyperlink{joystick_8c_a2598cfbd4278a7787e70e66bde5f825b}{test\+\_\+read\+\_\+joystick\+\_\+position} (void)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{resolution\+\_\+left} = 128
\item 
int \hyperlink{joystick_8c_ab0192e40e28bbcc262c866bae082b53e}{resolution\+\_\+right} = 128
\item 
int \hyperlink{joystick_8c_aff794932c975a7e00401076253a00781}{B\+U\+T\+T\+O\+N\+\_\+\+P\+R\+E\+S\+S\+E\+D\+\_\+\+F\+L\+AG} = 0
\end{DoxyCompactItemize}


\subsection{Detailed Description}
C-\/file for the joystick on the U\+S\+B-\/multiboards behaviour. 

\begin{DoxyAuthor}{Authors}
\+: Anastasia Lindb√§ck and Marie Skatvedt 
\end{DoxyAuthor}


\subsection{Macro Definition Documentation}
\index{joystick.\+c@{joystick.\+c}!R\+E\+S\+O\+L\+U\+T\+I\+O\+N\+\_\+\+E\+ND@{R\+E\+S\+O\+L\+U\+T\+I\+O\+N\+\_\+\+E\+ND}}
\index{R\+E\+S\+O\+L\+U\+T\+I\+O\+N\+\_\+\+E\+ND@{R\+E\+S\+O\+L\+U\+T\+I\+O\+N\+\_\+\+E\+ND}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{R\+E\+S\+O\+L\+U\+T\+I\+O\+N\+\_\+\+E\+ND}{RESOLUTION_END}}]{\setlength{\rightskip}{0pt plus 5cm}\#define R\+E\+S\+O\+L\+U\+T\+I\+O\+N\+\_\+\+E\+ND~255}\hypertarget{joystick_8c_aee830cbf12bce2bc11b437971fec8cae}{}\label{joystick_8c_aee830cbf12bce2bc11b437971fec8cae}


Definition at line 19 of file joystick.\+c.

\index{joystick.\+c@{joystick.\+c}!R\+E\+S\+O\+L\+U\+T\+I\+O\+N\+\_\+\+S\+T\+A\+RT@{R\+E\+S\+O\+L\+U\+T\+I\+O\+N\+\_\+\+S\+T\+A\+RT}}
\index{R\+E\+S\+O\+L\+U\+T\+I\+O\+N\+\_\+\+S\+T\+A\+RT@{R\+E\+S\+O\+L\+U\+T\+I\+O\+N\+\_\+\+S\+T\+A\+RT}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{R\+E\+S\+O\+L\+U\+T\+I\+O\+N\+\_\+\+S\+T\+A\+RT}{RESOLUTION_START}}]{\setlength{\rightskip}{0pt plus 5cm}\#define R\+E\+S\+O\+L\+U\+T\+I\+O\+N\+\_\+\+S\+T\+A\+RT~0}\hypertarget{joystick_8c_a452e6d5aa0923f60e4a70645c7a0bcba}{}\label{joystick_8c_a452e6d5aa0923f60e4a70645c7a0bcba}


Definition at line 18 of file joystick.\+c.

\index{joystick.\+c@{joystick.\+c}!S\+L\+A\+CK@{S\+L\+A\+CK}}
\index{S\+L\+A\+CK@{S\+L\+A\+CK}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{S\+L\+A\+CK}{SLACK}}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+L\+A\+CK~2}\hypertarget{joystick_8c_ad04b5a9527903c28f45d06a3a4d444fd}{}\label{joystick_8c_ad04b5a9527903c28f45d06a3a4d444fd}


Definition at line 15 of file joystick.\+c.

\index{joystick.\+c@{joystick.\+c}!X\+\_\+\+A\+X\+I\+S\+\_\+\+C\+H\+A\+N\+N\+EL@{X\+\_\+\+A\+X\+I\+S\+\_\+\+C\+H\+A\+N\+N\+EL}}
\index{X\+\_\+\+A\+X\+I\+S\+\_\+\+C\+H\+A\+N\+N\+EL@{X\+\_\+\+A\+X\+I\+S\+\_\+\+C\+H\+A\+N\+N\+EL}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{X\+\_\+\+A\+X\+I\+S\+\_\+\+C\+H\+A\+N\+N\+EL}{X_AXIS_CHANNEL}}]{\setlength{\rightskip}{0pt plus 5cm}\#define X\+\_\+\+A\+X\+I\+S\+\_\+\+C\+H\+A\+N\+N\+EL~5}\hypertarget{joystick_8c_a7ec3b74a77ec575359b57d254bb07eb6}{}\label{joystick_8c_a7ec3b74a77ec575359b57d254bb07eb6}


Definition at line 11 of file joystick.\+c.

\index{joystick.\+c@{joystick.\+c}!Y\+\_\+\+A\+X\+I\+S\+\_\+\+C\+H\+A\+N\+N\+EL@{Y\+\_\+\+A\+X\+I\+S\+\_\+\+C\+H\+A\+N\+N\+EL}}
\index{Y\+\_\+\+A\+X\+I\+S\+\_\+\+C\+H\+A\+N\+N\+EL@{Y\+\_\+\+A\+X\+I\+S\+\_\+\+C\+H\+A\+N\+N\+EL}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{Y\+\_\+\+A\+X\+I\+S\+\_\+\+C\+H\+A\+N\+N\+EL}{Y_AXIS_CHANNEL}}]{\setlength{\rightskip}{0pt plus 5cm}\#define Y\+\_\+\+A\+X\+I\+S\+\_\+\+C\+H\+A\+N\+N\+EL~4}\hypertarget{joystick_8c_a277601f3487707a05eb9ba3d484b11d2}{}\label{joystick_8c_a277601f3487707a05eb9ba3d484b11d2}


Definition at line 12 of file joystick.\+c.



\subsection{Function Documentation}
\index{joystick.\+c@{joystick.\+c}!button\+\_\+not\+\_\+pressed@{button\+\_\+not\+\_\+pressed}}
\index{button\+\_\+not\+\_\+pressed@{button\+\_\+not\+\_\+pressed}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{button\+\_\+not\+\_\+pressed(void)}{button_not_pressed(void)}}]{\setlength{\rightskip}{0pt plus 5cm}bool button\+\_\+not\+\_\+pressed (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{joystick_8c_a462650871e579842e50c0b28f39f57ad}{}\label{joystick_8c_a462650871e579842e50c0b28f39f57ad}
Function for detecting if joystiuck-\/button is pressed. \begin{DoxyReturn}{Returns}

\end{DoxyReturn}


Definition at line 72 of file joystick.\+c.


\begin{DoxyCode}
72                               \{
73     \textcolor{keywordtype}{bool} joystick\_button = (PINB & (1 << PINB2));
74     \textcolor{keywordflow}{return} joystick\_button;
75 \} 
\end{DoxyCode}
\index{joystick.\+c@{joystick.\+c}!game\+\_\+controller\+\_\+\+C\+A\+N\+\_\+transmit@{game\+\_\+controller\+\_\+\+C\+A\+N\+\_\+transmit}}
\index{game\+\_\+controller\+\_\+\+C\+A\+N\+\_\+transmit@{game\+\_\+controller\+\_\+\+C\+A\+N\+\_\+transmit}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{game\+\_\+controller\+\_\+\+C\+A\+N\+\_\+transmit(joystick position, Sliders slider\+\_\+position)}{game_controller_CAN_transmit(joystick position, Sliders slider_position)}}]{\setlength{\rightskip}{0pt plus 5cm}void game\+\_\+controller\+\_\+\+C\+A\+N\+\_\+transmit (
\begin{DoxyParamCaption}
\item[{{\bf joystick}}]{position, }
\item[{{\bf Sliders}}]{slider\+\_\+position}
\end{DoxyParamCaption}
)}\hypertarget{joystick_8c_a502c05d9e96f3d58e88d64896bda20df}{}\label{joystick_8c_a502c05d9e96f3d58e88d64896bda20df}
Function for sending joystick position via C\+AN to Node 2. 
\begin{DoxyParams}{Parameters}
{\em joystick} & position -\/ Position of joystick, struct containing x and y-\/positions (0-\/100\%). \\
\hline
\end{DoxyParams}


Definition at line 188 of file joystick.\+c.


\begin{DoxyCode}
188                                                                               \{
189     \hyperlink{structmessage}{message} msg;
190     msg.\hyperlink{structmessage_a4990637e6cbd0a7afc3e57c1d6a74eeb}{length} = 5;
191     msg.\hyperlink{structmessage_ab45746bda3c3c16b71d13dc15b86dff1}{id} = 0;
192 
193     msg.\hyperlink{structmessage_aef003837686b3fdd72c7a6fa54b0e483}{data}[0] = position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x};
194     msg.\hyperlink{structmessage_aef003837686b3fdd72c7a6fa54b0e483}{data}[1] = position.\hyperlink{structjoystick_a6cb74b7dd7305aa74141b1b05467dd23}{y};
195     msg.\hyperlink{structmessage_aef003837686b3fdd72c7a6fa54b0e483}{data}[3] = slider\_position.\hyperlink{struct_sliders_a7ba3b9ca46f73ff8e8d942ee9e4147b4}{Left};
196     msg.\hyperlink{structmessage_aef003837686b3fdd72c7a6fa54b0e483}{data}[4] = slider\_position.\hyperlink{struct_sliders_a2d43e10690bee0fefff9e526c3c9bee9}{Right};
197 
198     printf(\textcolor{stringliteral}{"Slider %i \(\backslash\)n\(\backslash\)r"}, msg.\hyperlink{structmessage_aef003837686b3fdd72c7a6fa54b0e483}{data}[3]);
199 
200     \textcolor{comment}{// The flag is checking whether the button is registered or not}
201     \textcolor{keywordflow}{if} ((\hyperlink{joystick_8c_aff794932c975a7e00401076253a00781}{BUTTON\_PRESSED\_FLAG} <= 1) && (\hyperlink{joystick_8c_ae42781368d7a1cef170bcec7a69e1665}{is\_button\_pressed}()))\{
202         \hyperlink{joystick_8c_aff794932c975a7e00401076253a00781}{BUTTON\_PRESSED\_FLAG} += 1;
203     \}
204     \textcolor{keywordflow}{switch} (\hyperlink{joystick_8c_aff794932c975a7e00401076253a00781}{BUTTON\_PRESSED\_FLAG})\{
205         \textcolor{comment}{// If button press not detected}
206         \textcolor{keywordflow}{case} 0:
207             msg.\hyperlink{structmessage_aef003837686b3fdd72c7a6fa54b0e483}{data}[2] = 0;
208             \textcolor{keywordflow}{break};
209         \textcolor{comment}{// If button pressed detected}
210         \textcolor{keywordflow}{case} 1:
211             \textcolor{comment}{//Send button pressed}
212             msg.\hyperlink{structmessage_aef003837686b3fdd72c7a6fa54b0e483}{data}[2] = 1;
213             \textcolor{keywordflow}{break}; 
214             \textcolor{comment}{//printf("Send button pressed.\(\backslash\)n\(\backslash\)r");}
215 
216 
217         \textcolor{comment}{// If the button is registered continously, the flag is cleared when the ball is no longer
       detected.}
218         \textcolor{keywordflow}{default}:
219             \textcolor{keywordflow}{if} (!\hyperlink{joystick_8c_ae42781368d7a1cef170bcec7a69e1665}{is\_button\_pressed}()) \{
220                 \hyperlink{joystick_8c_aff794932c975a7e00401076253a00781}{BUTTON\_PRESSED\_FLAG} = 0;
221                 msg.\hyperlink{structmessage_aef003837686b3fdd72c7a6fa54b0e483}{data}[2] = 0;
222             \} \textcolor{keywordflow}{else} \{
223                 msg.\hyperlink{structmessage_aef003837686b3fdd72c7a6fa54b0e483}{data}[2] = 0;
224             \}
225             \textcolor{keywordflow}{break};
226     \}
227 
228     \hyperlink{_node1_2_c_a_n_8c_a2cf12e9981661fc4680d341e8ab8d341}{CAN\_send\_message}(msg);  
229 \}
\end{DoxyCode}
\index{joystick.\+c@{joystick.\+c}!get\+\_\+quadrant@{get\+\_\+quadrant}}
\index{get\+\_\+quadrant@{get\+\_\+quadrant}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{get\+\_\+quadrant(joystick position)}{get_quadrant(joystick position)}}]{\setlength{\rightskip}{0pt plus 5cm}int get\+\_\+quadrant (
\begin{DoxyParamCaption}
\item[{{\bf joystick}}]{position}
\end{DoxyParamCaption}
)}\hypertarget{joystick_8c_a4a1ff77a1eb869df532d55d5d4562419}{}\label{joystick_8c_a4a1ff77a1eb869df532d55d5d4562419}
Function for returning the quadrant the joystick is position in by reading x-\/and y-\/position. 
\begin{DoxyParams}{Parameters}
{\em struct} & Joystick position -\/ Struct that yields the x-\/ and y-\/values respectively. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 1-\/4 -\/ Quadrant the joystick is in 
\end{DoxyReturn}


Definition at line 31 of file joystick.\+c.


\begin{DoxyCode}
31                                     \{
32     \textcolor{keywordflow}{if} (position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x} < \hyperlink{joystick_8c_ad04b5a9527903c28f45d06a3a4d444fd}{SLACK} && position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x} > -\hyperlink{joystick_8c_ad04b5a9527903c28f45d06a3a4d444fd}{SLACK} && position.\hyperlink{structjoystick_a6cb74b7dd7305aa74141b1b05467dd23}{y} < 
      \hyperlink{joystick_8c_ad04b5a9527903c28f45d06a3a4d444fd}{SLACK} && position.\hyperlink{structjoystick_a6cb74b7dd7305aa74141b1b05467dd23}{y} > -\hyperlink{joystick_8c_ad04b5a9527903c28f45d06a3a4d444fd}{SLACK}) \{
33         \textcolor{keywordflow}{return} 0;
34     \}
35     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x} >= 0 && position.\hyperlink{structjoystick_a6cb74b7dd7305aa74141b1b05467dd23}{y} > 0) \{
36         \textcolor{keywordflow}{return} 1;
37     \}
38     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x} < 0 && position.\hyperlink{structjoystick_a6cb74b7dd7305aa74141b1b05467dd23}{y} >= 0) \{
39         \textcolor{keywordflow}{return} 2;
40     \}
41     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x} <= 0 && position.\hyperlink{structjoystick_a6cb74b7dd7305aa74141b1b05467dd23}{y} < 0) \{
42         \textcolor{keywordflow}{return} 3;
43     \}
44     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x} > 0 && position.\hyperlink{structjoystick_a6cb74b7dd7305aa74141b1b05467dd23}{y} <= 0) \{
45         \textcolor{keywordflow}{return} 4;
46     \}
47     \textcolor{keywordflow}{else} \{
48         \textcolor{keywordflow}{return} 10000;
49     \}
50 \}
\end{DoxyCode}
\index{joystick.\+c@{joystick.\+c}!is\+\_\+button\+\_\+pressed@{is\+\_\+button\+\_\+pressed}}
\index{is\+\_\+button\+\_\+pressed@{is\+\_\+button\+\_\+pressed}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{is\+\_\+button\+\_\+pressed()}{is_button_pressed()}}]{\setlength{\rightskip}{0pt plus 5cm}bool is\+\_\+button\+\_\+pressed (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{joystick_8c_ae42781368d7a1cef170bcec7a69e1665}{}\label{joystick_8c_ae42781368d7a1cef170bcec7a69e1665}


Definition at line 181 of file joystick.\+c.


\begin{DoxyCode}
181                          \{
182     \textcolor{keywordflow}{return} ((PINB & (1 << PINB0)) || (PINB & (1 << PINB1)));
183 \}
\end{DoxyCode}
\index{joystick.\+c@{joystick.\+c}!is\+\_\+vertical\+\_\+direction@{is\+\_\+vertical\+\_\+direction}}
\index{is\+\_\+vertical\+\_\+direction@{is\+\_\+vertical\+\_\+direction}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{is\+\_\+vertical\+\_\+direction(joystick position)}{is_vertical_direction(joystick position)}}]{\setlength{\rightskip}{0pt plus 5cm}bool is\+\_\+vertical\+\_\+direction (
\begin{DoxyParamCaption}
\item[{{\bf joystick}}]{position}
\end{DoxyParamCaption}
)}\hypertarget{joystick_8c_a8f18a9c60a5221fc41b6af4ec8ce8bbd}{}\label{joystick_8c_a8f18a9c60a5221fc41b6af4ec8ce8bbd}
Function checks whether the direction is up or down, as opposed to right or left. 
\begin{DoxyParams}{Parameters}
{\em struct} & Joystick position -\/ Struct that yields the x-\/ and y-\/values respectively. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true or false -\/ up or down (true), right or left(false) 
\end{DoxyReturn}


Definition at line 56 of file joystick.\+c.


\begin{DoxyCode}
56                                               \{
57     \textcolor{keywordtype}{int} abs\_x = abs(position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x});
58     \textcolor{keywordtype}{int} abs\_y = abs(position.\hyperlink{structjoystick_a6cb74b7dd7305aa74141b1b05467dd23}{y});
59 
60     \textcolor{keywordflow}{if} (abs\_y > abs\_x) \{
61         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
62     \}
63     \textcolor{keywordflow}{else} \{
64         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
65     \}
66 \}
\end{DoxyCode}
\index{joystick.\+c@{joystick.\+c}!joystick\+\_\+calibrate@{joystick\+\_\+calibrate}}
\index{joystick\+\_\+calibrate@{joystick\+\_\+calibrate}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{joystick\+\_\+calibrate(void)}{joystick_calibrate(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void joystick\+\_\+calibrate (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{joystick_8c_a93286350afb09bf09a900d6a01d3ca37}{}\label{joystick_8c_a93286350afb09bf09a900d6a01d3ca37}
Function for calibrating the joystick neutral position (neutral = origo) 

Definition at line 80 of file joystick.\+c.


\begin{DoxyCode}
80                               \{
81     \hyperlink{structjoystick}{joystick} position; 
82     position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x} = \hyperlink{_a_d_c_8c_a6ea1e122e4b99ea1d173921f487f1579}{selected\_channel\_output}(\hyperlink{joystick_8c_a7ec3b74a77ec575359b57d254bb07eb6}{X\_AXIS\_CHANNEL});
83     position.\hyperlink{structjoystick_a6cb74b7dd7305aa74141b1b05467dd23}{y} = \hyperlink{_a_d_c_8c_a6ea1e122e4b99ea1d173921f487f1579}{selected\_channel\_output}(\hyperlink{joystick_8c_a277601f3487707a05eb9ba3d484b11d2}{Y\_AXIS\_CHANNEL});
84 
85     \hyperlink{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{resolution\_left} = position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x};
86     \hyperlink{joystick_8c_ab0192e40e28bbcc262c866bae082b53e}{resolution\_right} = \hyperlink{joystick_8c_aee830cbf12bce2bc11b437971fec8cae}{RESOLUTION\_END} - position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x};
87 \} 
\end{DoxyCode}
\index{joystick.\+c@{joystick.\+c}!joystick\+\_\+direction@{joystick\+\_\+direction}}
\index{joystick\+\_\+direction@{joystick\+\_\+direction}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{joystick\+\_\+direction(void)}{joystick_direction(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf direction} joystick\+\_\+direction (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{joystick_8c_aa6f4a77257f14ed7f8fdd675d6a2697b}{}\label{joystick_8c_aa6f4a77257f14ed7f8fdd675d6a2697b}
Function takes the direction and quadrant into consideration to decide in which direction the joystick is pointing (the most) towards. 
\begin{DoxyParams}{Parameters}
{\em void} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
enum Direction -\/ The direction, either UP, D\+O\+WN, L\+E\+FT or R\+I\+G\+HT 
\end{DoxyReturn}


Definition at line 130 of file joystick.\+c.


\begin{DoxyCode}
130                                   \{
131 
132     \hyperlink{structjoystick}{joystick} position = \hyperlink{joystick_8c_ab143fc440ad8744d48c20fc16e586022}{joystick\_position}();
133 
134     \textcolor{keywordtype}{int} quadrant = \hyperlink{joystick_8c_a4a1ff77a1eb869df532d55d5d4562419}{get\_quadrant}(position);
135 
136     \textcolor{keywordtype}{bool} upDown = \hyperlink{joystick_8c_a8f18a9c60a5221fc41b6af4ec8ce8bbd}{is\_vertical\_direction}(position);
137 
138     \textcolor{keywordflow}{switch}(quadrant)\{
139         \textcolor{keywordflow}{case} 0:
140             \textcolor{keywordflow}{return} \hyperlink{joystick_8h_a99f26e6ee9fcd62f75203b5402df8098af46d14eb9d5d71afc9f6e747689fcb56}{NEUTRAL};
141 
142         \textcolor{keywordflow}{case} 1:
143             \textcolor{keywordflow}{if} (upDown)\{
144                 \textcolor{keywordflow}{return} \hyperlink{joystick_8h_a99f26e6ee9fcd62f75203b5402df8098aba595d8bca8bc5e67c37c0a9d89becfa}{UP};
145             \}
146             \textcolor{keywordflow}{else} \{
147                 \textcolor{keywordflow}{return} \hyperlink{joystick_8h_a99f26e6ee9fcd62f75203b5402df8098aec8379af7490bb9eaaf579cf17876f38}{RIGHT};
148             \}
149 
150         \textcolor{keywordflow}{case} 2:
151             \textcolor{keywordflow}{if} (upDown)\{
152                 \textcolor{keywordflow}{return} \hyperlink{joystick_8h_a99f26e6ee9fcd62f75203b5402df8098aba595d8bca8bc5e67c37c0a9d89becfa}{UP};
153             \}
154             \textcolor{keywordflow}{else} \{
155                 \textcolor{keywordflow}{return} \hyperlink{joystick_8h_a99f26e6ee9fcd62f75203b5402df8098adb45120aafd37a973140edee24708065}{LEFT};
156             \}
157 
158         \textcolor{keywordflow}{case} 3:
159             \textcolor{keywordflow}{if} (upDown) \{
160                 \textcolor{keywordflow}{return} \hyperlink{joystick_8h_a99f26e6ee9fcd62f75203b5402df8098a9b0b4a95b99523966e0e34ffdadac9da}{DOWN};
161             \}
162             \textcolor{keywordflow}{else} \{
163                 \textcolor{keywordflow}{return} \hyperlink{joystick_8h_a99f26e6ee9fcd62f75203b5402df8098adb45120aafd37a973140edee24708065}{LEFT};
164             \}
165 
166         \textcolor{keywordflow}{case} 4: 
167             \textcolor{keywordflow}{if} (upDown)\{
168                 \textcolor{keywordflow}{return} \hyperlink{joystick_8h_a99f26e6ee9fcd62f75203b5402df8098a9b0b4a95b99523966e0e34ffdadac9da}{DOWN};
169             \}
170             \textcolor{keywordflow}{else} \{
171                 \textcolor{keywordflow}{return} \hyperlink{joystick_8h_a99f26e6ee9fcd62f75203b5402df8098aec8379af7490bb9eaaf579cf17876f38}{RIGHT};
172             \}
173 
174         \textcolor{keywordflow}{default}:
175             \textcolor{keywordflow}{return} \hyperlink{joystick_8h_a99f26e6ee9fcd62f75203b5402df8098a6ce26a62afab55d7606ad4e92428b30c}{UNKNOWN};
176 
177     \}
178 
179 \}
\end{DoxyCode}
\index{joystick.\+c@{joystick.\+c}!joystick\+\_\+position@{joystick\+\_\+position}}
\index{joystick\+\_\+position@{joystick\+\_\+position}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{joystick\+\_\+position(void)}{joystick_position(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf joystick} joystick\+\_\+position (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{joystick_8c_ab143fc440ad8744d48c20fc16e586022}{}\label{joystick_8c_ab143fc440ad8744d48c20fc16e586022}
Function converts digital signal from joysticks x-\/ and y-\/values with voltage resolution 0-\/255 to percent-\/representation -\/100-\/100. 
\begin{DoxyParams}{Parameters}
{\em void} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
joystick position -\/ Struct containing x-\/and-\/y-\/positions of joysticks represented as percentage of displacement -\/100-\/100. 
\end{DoxyReturn}


Definition at line 93 of file joystick.\+c.


\begin{DoxyCode}
93                                  \{
94 
95     \hyperlink{structjoystick}{joystick} position;
96 
97     \textcolor{comment}{// Converting from 0-255 resolution to -100-100 resolution in x-axis}
98     \textcolor{comment}{// Adding slack around origo on x-axis, so that neutral position will yield position (0,0)}
99     \textcolor{keywordflow}{if} ((\hyperlink{_a_d_c_8c_a6ea1e122e4b99ea1d173921f487f1579}{selected\_channel\_output}(\hyperlink{joystick_8c_a7ec3b74a77ec575359b57d254bb07eb6}{X\_AXIS\_CHANNEL}) >= (
      \hyperlink{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{resolution\_left})) && (\hyperlink{_a_d_c_8c_a6ea1e122e4b99ea1d173921f487f1579}{selected\_channel\_output}(
      \hyperlink{joystick_8c_a7ec3b74a77ec575359b57d254bb07eb6}{X\_AXIS\_CHANNEL}) <= (\hyperlink{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{resolution\_left}))) \{
100         position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x} = 0;
101     \}
102     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{_a_d_c_8c_a6ea1e122e4b99ea1d173921f487f1579}{selected\_channel\_output}(\hyperlink{joystick_8c_a7ec3b74a77ec575359b57d254bb07eb6}{X\_AXIS\_CHANNEL}) < 
      \hyperlink{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{resolution\_left}) \{
103         position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x} = -(((\hyperlink{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{resolution\_left}-\hyperlink{_a_d_c_8c_a6ea1e122e4b99ea1d173921f487f1579}{selected\_channel\_output}(
      \hyperlink{joystick_8c_a7ec3b74a77ec575359b57d254bb07eb6}{X\_AXIS\_CHANNEL}))*100)/\hyperlink{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{resolution\_left});
104     \} 
105     \textcolor{keywordflow}{else} \{
106         position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x} = (((\hyperlink{_a_d_c_8c_a6ea1e122e4b99ea1d173921f487f1579}{selected\_channel\_output}(
      \hyperlink{joystick_8c_a7ec3b74a77ec575359b57d254bb07eb6}{X\_AXIS\_CHANNEL})-\hyperlink{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{resolution\_left})*100)/
      \hyperlink{joystick_8c_ab0192e40e28bbcc262c866bae082b53e}{resolution\_right});
107     \}
108 
109     \textcolor{comment}{// Converting from 0-255 resolution to -100-100 resolution in y-axis}
110     \textcolor{comment}{// Adding slack around origo on y-axis, so that neutral position will yield position (0,0)}
111     \textcolor{keywordflow}{if} ((\hyperlink{_a_d_c_8c_a6ea1e122e4b99ea1d173921f487f1579}{selected\_channel\_output}(\hyperlink{joystick_8c_a277601f3487707a05eb9ba3d484b11d2}{Y\_AXIS\_CHANNEL}) >= (
      \hyperlink{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{resolution\_left})) && (\hyperlink{_a_d_c_8c_a6ea1e122e4b99ea1d173921f487f1579}{selected\_channel\_output}(
      \hyperlink{joystick_8c_a277601f3487707a05eb9ba3d484b11d2}{Y\_AXIS\_CHANNEL}) <= (\hyperlink{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{resolution\_left}))) \{
112         position.\hyperlink{structjoystick_a6cb74b7dd7305aa74141b1b05467dd23}{y} = 0;
113     \}
114     
115     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{_a_d_c_8c_a6ea1e122e4b99ea1d173921f487f1579}{selected\_channel\_output}(\hyperlink{joystick_8c_a277601f3487707a05eb9ba3d484b11d2}{Y\_AXIS\_CHANNEL}) < 
      \hyperlink{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{resolution\_left}) \{
116         position.\hyperlink{structjoystick_a6cb74b7dd7305aa74141b1b05467dd23}{y} = -(((\hyperlink{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{resolution\_left}-\hyperlink{_a_d_c_8c_a6ea1e122e4b99ea1d173921f487f1579}{selected\_channel\_output}(
      \hyperlink{joystick_8c_a277601f3487707a05eb9ba3d484b11d2}{Y\_AXIS\_CHANNEL}))*100)/\hyperlink{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{resolution\_left});
117     \} 
118 
119     \textcolor{keywordflow}{else} \{
120         position.\hyperlink{structjoystick_a6cb74b7dd7305aa74141b1b05467dd23}{y} = (((\hyperlink{_a_d_c_8c_a6ea1e122e4b99ea1d173921f487f1579}{selected\_channel\_output}(
      \hyperlink{joystick_8c_a277601f3487707a05eb9ba3d484b11d2}{Y\_AXIS\_CHANNEL})-\hyperlink{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{resolution\_left})*100)/
      \hyperlink{joystick_8c_ab0192e40e28bbcc262c866bae082b53e}{resolution\_right});
121     \}
122     
123     \textcolor{keywordflow}{return} position;
124 \}
\end{DoxyCode}
\index{joystick.\+c@{joystick.\+c}!test\+\_\+read\+\_\+joystick\+\_\+position@{test\+\_\+read\+\_\+joystick\+\_\+position}}
\index{test\+\_\+read\+\_\+joystick\+\_\+position@{test\+\_\+read\+\_\+joystick\+\_\+position}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{test\+\_\+read\+\_\+joystick\+\_\+position(void)}{test_read_joystick_position(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void test\+\_\+read\+\_\+joystick\+\_\+position (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{joystick_8c_a2598cfbd4278a7787e70e66bde5f825b}{}\label{joystick_8c_a2598cfbd4278a7787e70e66bde5f825b}
Test function for reading joystick position. 

Definition at line 233 of file joystick.\+c.


\begin{DoxyCode}
233                                       \{
234     \textcolor{comment}{//Read joystick-position: }
235     \_delay\_ms(500);
236 
237     \hyperlink{structjoystick}{joystick} joy\_position = \hyperlink{joystick_8c_ab143fc440ad8744d48c20fc16e586022}{joystick\_position}();
238 
239     printf(\textcolor{stringliteral}{"X-value: %i\(\backslash\)n\(\backslash\)r"}, joy\_position.\hyperlink{structjoystick_aed4380d21fdc18511efe8650eb544333}{x});
240     printf(\textcolor{stringliteral}{"Y-value: %i\(\backslash\)n\(\backslash\)r"}, joy\_position.\hyperlink{structjoystick_a6cb74b7dd7305aa74141b1b05467dd23}{y});
241     printf(\textcolor{stringliteral}{"X-value: %i\(\backslash\)n\(\backslash\)r"}, \hyperlink{_a_d_c_8c_a6ea1e122e4b99ea1d173921f487f1579}{selected\_channel\_output}(5));
242     printf(\textcolor{stringliteral}{"Y-value: %i\(\backslash\)n\(\backslash\)r"}, \hyperlink{_a_d_c_8c_a6ea1e122e4b99ea1d173921f487f1579}{selected\_channel\_output}(4));
243 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\index{joystick.\+c@{joystick.\+c}!B\+U\+T\+T\+O\+N\+\_\+\+P\+R\+E\+S\+S\+E\+D\+\_\+\+F\+L\+AG@{B\+U\+T\+T\+O\+N\+\_\+\+P\+R\+E\+S\+S\+E\+D\+\_\+\+F\+L\+AG}}
\index{B\+U\+T\+T\+O\+N\+\_\+\+P\+R\+E\+S\+S\+E\+D\+\_\+\+F\+L\+AG@{B\+U\+T\+T\+O\+N\+\_\+\+P\+R\+E\+S\+S\+E\+D\+\_\+\+F\+L\+AG}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{B\+U\+T\+T\+O\+N\+\_\+\+P\+R\+E\+S\+S\+E\+D\+\_\+\+F\+L\+AG}{BUTTON_PRESSED_FLAG}}]{\setlength{\rightskip}{0pt plus 5cm}int B\+U\+T\+T\+O\+N\+\_\+\+P\+R\+E\+S\+S\+E\+D\+\_\+\+F\+L\+AG = 0}\hypertarget{joystick_8c_aff794932c975a7e00401076253a00781}{}\label{joystick_8c_aff794932c975a7e00401076253a00781}


Definition at line 25 of file joystick.\+c.

\index{joystick.\+c@{joystick.\+c}!resolution\+\_\+left@{resolution\+\_\+left}}
\index{resolution\+\_\+left@{resolution\+\_\+left}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{resolution\+\_\+left}{resolution_left}}]{\setlength{\rightskip}{0pt plus 5cm}int resolution\+\_\+left = 128}\hypertarget{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}{}\label{joystick_8c_a90fea54672280560eca272a7c7ffd2ef}


Definition at line 22 of file joystick.\+c.

\index{joystick.\+c@{joystick.\+c}!resolution\+\_\+right@{resolution\+\_\+right}}
\index{resolution\+\_\+right@{resolution\+\_\+right}!joystick.\+c@{joystick.\+c}}
\subsubsection[{\texorpdfstring{resolution\+\_\+right}{resolution_right}}]{\setlength{\rightskip}{0pt plus 5cm}int resolution\+\_\+right = 128}\hypertarget{joystick_8c_ab0192e40e28bbcc262c866bae082b53e}{}\label{joystick_8c_ab0192e40e28bbcc262c866bae082b53e}


Definition at line 23 of file joystick.\+c.

