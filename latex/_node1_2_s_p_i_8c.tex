\hypertarget{_node1_2_s_p_i_8c}{}\section{Node1/\+S\+PI.c File Reference}
\label{_node1_2_s_p_i_8c}\index{Node1/\+S\+P\+I.\+c@{Node1/\+S\+P\+I.\+c}}
{\ttfamily \#include \char`\"{}S\+P\+I.\+h\char`\"{}}\\*
Include dependency graph for S\+P\+I.\+c\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{_node1_2_s_p_i_8c_afd9b09f58917f0e2d14c61b956eba214}{S\+P\+I\+\_\+init} (void)
\item 
uint8\+\_\+t \hyperlink{_node1_2_s_p_i_8c_abf767bd2a01130b1d7b907b9e8f4cd81}{S\+P\+I\+\_\+read\+\_\+write} (uint8\+\_\+t data)
\item 
void \hyperlink{_node1_2_s_p_i_8c_a878ebc786a3f8d094f8afd5978d8769b}{S\+P\+I\+\_\+test} (char data)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{Node1/\+S\+P\+I.\+c@{Node1/\+S\+P\+I.\+c}!S\+P\+I\+\_\+init@{S\+P\+I\+\_\+init}}
\index{S\+P\+I\+\_\+init@{S\+P\+I\+\_\+init}!Node1/\+S\+P\+I.\+c@{Node1/\+S\+P\+I.\+c}}
\subsubsection[{\texorpdfstring{S\+P\+I\+\_\+init(void)}{SPI_init(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void S\+P\+I\+\_\+init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{_node1_2_s_p_i_8c_afd9b09f58917f0e2d14c61b956eba214}{}\label{_node1_2_s_p_i_8c_afd9b09f58917f0e2d14c61b956eba214}
Function for initializing communication over S\+PI. 

Definition at line 10 of file S\+P\+I.\+c.


\begin{DoxyCode}
10                     \{
11     \textcolor{comment}{// Set MOSI}
12     \hyperlink{_a_d_c_8h_aee5ffa3d123086ed1df972387522e4eb}{set\_bit}(\hyperlink{_node1_2_s_p_i_8h_ac2909a28e72d56f28c0ad931c4e565af}{DDR\_SPI}, \hyperlink{_node1_2_s_p_i_8h_abaeddda4b992af7165ed898ab8b2b4ac}{PIN\_MOSI});
13 
14     \textcolor{comment}{// Set SCK output}
15     \hyperlink{_a_d_c_8h_aee5ffa3d123086ed1df972387522e4eb}{set\_bit}(\hyperlink{_node1_2_s_p_i_8h_ac2909a28e72d56f28c0ad931c4e565af}{DDR\_SPI}, \hyperlink{_node1_2_s_p_i_8h_a6a1a3e97267377d1b18bb9073192fdf1}{PIN\_SCK});
16 
17     \textcolor{comment}{// Set slave select}
18     \hyperlink{_a_d_c_8h_aee5ffa3d123086ed1df972387522e4eb}{set\_bit}(\hyperlink{_node1_2_s_p_i_8h_ac2909a28e72d56f28c0ad931c4e565af}{DDR\_SPI}, \hyperlink{_node1_2_s_p_i_8h_ab4b553591a495409d4f7cec4b6c3e754}{PIN\_SS});
19     
20     \textcolor{comment}{// Enable Master}
21     \hyperlink{_a_d_c_8h_aee5ffa3d123086ed1df972387522e4eb}{set\_bit}(SPCR, MSTR);
22 
23     \textcolor{comment}{// Set clock rate fck/16}
24     \hyperlink{_a_d_c_8h_aee5ffa3d123086ed1df972387522e4eb}{set\_bit}(SPCR, SPR0);
25 
26     \textcolor{comment}{// Enable SPI}
27     \hyperlink{_a_d_c_8h_aee5ffa3d123086ed1df972387522e4eb}{set\_bit}(SPCR, SPE);
28 \}
\end{DoxyCode}
\index{Node1/\+S\+P\+I.\+c@{Node1/\+S\+P\+I.\+c}!S\+P\+I\+\_\+read\+\_\+write@{S\+P\+I\+\_\+read\+\_\+write}}
\index{S\+P\+I\+\_\+read\+\_\+write@{S\+P\+I\+\_\+read\+\_\+write}!Node1/\+S\+P\+I.\+c@{Node1/\+S\+P\+I.\+c}}
\subsubsection[{\texorpdfstring{S\+P\+I\+\_\+read\+\_\+write(uint8\+\_\+t data)}{SPI_read_write(uint8_t data)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t S\+P\+I\+\_\+read\+\_\+write (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{data}
\end{DoxyParamCaption}
)}\hypertarget{_node1_2_s_p_i_8c_abf767bd2a01130b1d7b907b9e8f4cd81}{}\label{_node1_2_s_p_i_8c_abf767bd2a01130b1d7b907b9e8f4cd81}
Function for configurating S\+PI as master and transmitting data. 
\begin{DoxyParams}{Parameters}
{\em char} & data -\/ Data to send \\
\hline
\end{DoxyParams}


Definition at line 34 of file S\+P\+I.\+c.


\begin{DoxyCode}
34                                      \{
35     \textcolor{comment}{/* Transmission of data */}
36     \textcolor{comment}{// Start transmission}
37     SPDR = data;
38 
39     \textcolor{comment}{// Wait for transmission to complete}
40     \hyperlink{_node1_2bit__operations_8h_adb35c737e10e9b80fe812de60da481a9}{loop\_until\_bit\_is\_set}(SPSR, SPIF);
41 
42     \textcolor{keywordflow}{return} SPDR;
43 \}
\end{DoxyCode}
\index{Node1/\+S\+P\+I.\+c@{Node1/\+S\+P\+I.\+c}!S\+P\+I\+\_\+test@{S\+P\+I\+\_\+test}}
\index{S\+P\+I\+\_\+test@{S\+P\+I\+\_\+test}!Node1/\+S\+P\+I.\+c@{Node1/\+S\+P\+I.\+c}}
\subsubsection[{\texorpdfstring{S\+P\+I\+\_\+test(char data)}{SPI_test(char data)}}]{\setlength{\rightskip}{0pt plus 5cm}void S\+P\+I\+\_\+test (
\begin{DoxyParamCaption}
\item[{char}]{data}
\end{DoxyParamCaption}
)}\hypertarget{_node1_2_s_p_i_8c_a878ebc786a3f8d094f8afd5978d8769b}{}\label{_node1_2_s_p_i_8c_a878ebc786a3f8d094f8afd5978d8769b}
Function for testing S\+PI driver. 
\begin{DoxyParams}{Parameters}
{\em char} & data -\/ Data to send \\
\hline
\end{DoxyParams}


Definition at line 49 of file S\+P\+I.\+c.


\begin{DoxyCode}
49                         \{
50     \hyperlink{_node1_2_s_p_i_8c_afd9b09f58917f0e2d14c61b956eba214}{SPI\_init}();
51 
52     \textcolor{keywordflow}{while}(1) \{
53         \hyperlink{_node1_2_s_p_i_8c_abf767bd2a01130b1d7b907b9e8f4cd81}{SPI\_read\_write}(data);
54 
55     \}
56 \}\end{DoxyCode}
