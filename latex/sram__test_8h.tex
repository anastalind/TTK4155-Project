\hypertarget{sram__test_8h}{}\section{Node1/sram\+\_\+test.h File Reference}
\label{sram__test_8h}\index{Node1/sram\+\_\+test.\+h@{Node1/sram\+\_\+test.\+h}}


Header-\/file for testing reading and writing of data.  


{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$stdint.\+h$>$}\\*
Include dependency graph for sram\+\_\+test.\+h\+:
% FIG 0
This graph shows which files directly or indirectly include this file\+:
% FIG 1
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{sram__test_8h_a2e2934cf8f43363e11e4fd6c60db1666}{S\+R\+A\+M\+\_\+test} (void)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Header-\/file for testing reading and writing of data. 



\subsection{Function Documentation}
\index{sram\+\_\+test.\+h@{sram\+\_\+test.\+h}!S\+R\+A\+M\+\_\+test@{S\+R\+A\+M\+\_\+test}}
\index{S\+R\+A\+M\+\_\+test@{S\+R\+A\+M\+\_\+test}!sram\+\_\+test.\+h@{sram\+\_\+test.\+h}}
\subsubsection[{\texorpdfstring{S\+R\+A\+M\+\_\+test(void)}{SRAM_test(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void S\+R\+A\+M\+\_\+test (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{sram__test_8h_a2e2934cf8f43363e11e4fd6c60db1666}{}\label{sram__test_8h_a2e2934cf8f43363e11e4fd6c60db1666}
Function for testing writing and reading to and from U\+A\+RT. Printing error-\/message if errors occur. 

Definition at line 11 of file sram\+\_\+test.\+c.


\begin{DoxyCode}
11                     \{
12     \textcolor{keyword}{volatile} \textcolor{keywordtype}{char} *ext\_ram = (\textcolor{keywordtype}{char} *) 0x1800; \textcolor{comment}{// Start address for the SRAM}
13     uint16\_t ext\_ram\_size= 0x800;
14     uint16\_t write\_errors= 0;
15     uint16\_t retrieval\_errors= 0;
16     printf(\textcolor{stringliteral}{"Starting SRAM test...\(\backslash\)n\(\backslash\)r"});
17     \textcolor{comment}{// rand() stores some internal state, so calling this function in a loop will}
18     \textcolor{comment}{// yield different seeds each time (unless srand() is called before this function)}
19     uint16\_t seed = rand();
20     \textcolor{comment}{// Write phase: Immediately check that the correct value was stored}
21     srand(seed);
22     \textcolor{keywordflow}{for} (uint16\_t i = 0; i < ext\_ram\_size; i++) \{
23         uint8\_t some\_value = rand();
24         ext\_ram[i] = some\_value;
25         uint8\_t retreived\_value = ext\_ram[i];
26         \textcolor{keywordflow}{if} (retreived\_value != some\_value) \{
27             printf(\textcolor{stringliteral}{"Write phase error: ext\_ram[%4d] = %02X (should be %02X)\(\backslash\)n\(\backslash\)r"}, i, retreived\_value, 
      some\_value);
28             write\_errors++;
29         \}
30     \}
31     \textcolor{comment}{// Retrieval phase: Check that no values were changed during or after the write phase}
32     srand(seed);\textcolor{comment}{// reset the PRNG to the stateit had before the write phase}
33     \textcolor{keywordflow}{for} (uint16\_t i = 0; i < ext\_ram\_size; i++) \{
34         uint8\_t some\_value = rand();
35 
36         uint8\_t retreived\_value = ext\_ram[i];
37         \textcolor{keywordflow}{if} (retreived\_value != some\_value) \{
38             printf(\textcolor{stringliteral}{"Retrieval phase error: ext\_ram[%4d] = %02X (should be %02X)\(\backslash\)n\(\backslash\)r"}, i, retreived\_value, 
      some\_value);
39             retrieval\_errors++;
40         \}
41     \}
42     printf(\textcolor{stringliteral}{"SRAM test completed with \(\backslash\)n\(\backslash\)r%4d errors in write phase and \(\backslash\)n\(\backslash\)r%4d errors in retrieval phase\(\backslash\)n
      \(\backslash\)n\(\backslash\)r"}, write\_errors, retrieval\_errors);
43 \}\end{DoxyCode}
