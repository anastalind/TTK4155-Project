\hypertarget{_node2_2_s_p_i_8c}{}\section{Node2/\+S\+PI.c File Reference}
\label{_node2_2_s_p_i_8c}\index{Node2/\+S\+P\+I.\+c@{Node2/\+S\+P\+I.\+c}}
{\ttfamily \#include \char`\"{}S\+P\+I.\+h\char`\"{}}\\*
Include dependency graph for S\+P\+I.\+c\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{_node2_2_s_p_i_8c_afd9b09f58917f0e2d14c61b956eba214}{S\+P\+I\+\_\+init} (void)
\item 
uint8\+\_\+t \hyperlink{_node2_2_s_p_i_8c_abf767bd2a01130b1d7b907b9e8f4cd81}{S\+P\+I\+\_\+read\+\_\+write} (uint8\+\_\+t data)
\item 
void \hyperlink{_node2_2_s_p_i_8c_a878ebc786a3f8d094f8afd5978d8769b}{S\+P\+I\+\_\+test} (char data)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{Node2/\+S\+P\+I.\+c@{Node2/\+S\+P\+I.\+c}!S\+P\+I\+\_\+init@{S\+P\+I\+\_\+init}}
\index{S\+P\+I\+\_\+init@{S\+P\+I\+\_\+init}!Node2/\+S\+P\+I.\+c@{Node2/\+S\+P\+I.\+c}}
\subsubsection[{\texorpdfstring{S\+P\+I\+\_\+init(void)}{SPI_init(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void S\+P\+I\+\_\+init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{_node2_2_s_p_i_8c_afd9b09f58917f0e2d14c61b956eba214}{}\label{_node2_2_s_p_i_8c_afd9b09f58917f0e2d14c61b956eba214}
Function for initializing communication over S\+PI. 

Definition at line 10 of file S\+P\+I.\+c.


\begin{DoxyCode}
10                     \{
11 
12     \textcolor{comment}{// Set MOSI}
13     \hyperlink{_a_d_c_8h_aee5ffa3d123086ed1df972387522e4eb}{set\_bit}(\hyperlink{_node1_2_s_p_i_8h_ac2909a28e72d56f28c0ad931c4e565af}{DDR\_SPI}, \hyperlink{_node1_2_s_p_i_8h_abaeddda4b992af7165ed898ab8b2b4ac}{PIN\_MOSI});
14 
15     \textcolor{comment}{// Set SCK output}
16     \hyperlink{_a_d_c_8h_aee5ffa3d123086ed1df972387522e4eb}{set\_bit}(\hyperlink{_node1_2_s_p_i_8h_ac2909a28e72d56f28c0ad931c4e565af}{DDR\_SPI}, \hyperlink{_node1_2_s_p_i_8h_a6a1a3e97267377d1b18bb9073192fdf1}{PIN\_SCK});
17 
18     \textcolor{comment}{// Set slave select}
19     \hyperlink{_a_d_c_8h_aee5ffa3d123086ed1df972387522e4eb}{set\_bit}(\hyperlink{_node1_2_s_p_i_8h_ac2909a28e72d56f28c0ad931c4e565af}{DDR\_SPI}, \hyperlink{_node1_2_s_p_i_8h_ab4b553591a495409d4f7cec4b6c3e754}{PIN\_SS}); 
20 
21     \hyperlink{_a_d_c_8h_aee5ffa3d123086ed1df972387522e4eb}{set\_bit}(\hyperlink{_node1_2_s_p_i_8h_ac2909a28e72d56f28c0ad931c4e565af}{DDR\_SPI}, PB0); 
22 
23     \textcolor{comment}{// Enable Master}
24     \hyperlink{_a_d_c_8h_aee5ffa3d123086ed1df972387522e4eb}{set\_bit}(SPCR, MSTR);
25 
26     \textcolor{comment}{// Set clock rate fck/16}
27     \hyperlink{_a_d_c_8h_aee5ffa3d123086ed1df972387522e4eb}{set\_bit}(SPCR, SPR0);
28 
29     \textcolor{comment}{// Enable SPI}
30     \hyperlink{_a_d_c_8h_aee5ffa3d123086ed1df972387522e4eb}{set\_bit}(SPCR, SPE);
31     
32     
33 \}
\end{DoxyCode}
\index{Node2/\+S\+P\+I.\+c@{Node2/\+S\+P\+I.\+c}!S\+P\+I\+\_\+read\+\_\+write@{S\+P\+I\+\_\+read\+\_\+write}}
\index{S\+P\+I\+\_\+read\+\_\+write@{S\+P\+I\+\_\+read\+\_\+write}!Node2/\+S\+P\+I.\+c@{Node2/\+S\+P\+I.\+c}}
\subsubsection[{\texorpdfstring{S\+P\+I\+\_\+read\+\_\+write(uint8\+\_\+t data)}{SPI_read_write(uint8_t data)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t S\+P\+I\+\_\+read\+\_\+write (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{data}
\end{DoxyParamCaption}
)}\hypertarget{_node2_2_s_p_i_8c_abf767bd2a01130b1d7b907b9e8f4cd81}{}\label{_node2_2_s_p_i_8c_abf767bd2a01130b1d7b907b9e8f4cd81}
Function for configurating S\+PI as master and transmitting data. 
\begin{DoxyParams}{Parameters}
{\em char} & data -\/ Data to send \\
\hline
\end{DoxyParams}


Definition at line 39 of file S\+P\+I.\+c.


\begin{DoxyCode}
39                                      \{
40     \textcolor{comment}{/* Transmission of data */}
41     \textcolor{comment}{// Start transmission}
42     SPDR = data;
43 
44     \textcolor{comment}{// Wait for transmission to complete}
45     \hyperlink{_node1_2bit__operations_8h_adb35c737e10e9b80fe812de60da481a9}{loop\_until\_bit\_is\_set}(SPSR, SPIF);
46 
47     \textcolor{keywordflow}{return} SPDR;
48 \}
\end{DoxyCode}
\index{Node2/\+S\+P\+I.\+c@{Node2/\+S\+P\+I.\+c}!S\+P\+I\+\_\+test@{S\+P\+I\+\_\+test}}
\index{S\+P\+I\+\_\+test@{S\+P\+I\+\_\+test}!Node2/\+S\+P\+I.\+c@{Node2/\+S\+P\+I.\+c}}
\subsubsection[{\texorpdfstring{S\+P\+I\+\_\+test(char data)}{SPI_test(char data)}}]{\setlength{\rightskip}{0pt plus 5cm}void S\+P\+I\+\_\+test (
\begin{DoxyParamCaption}
\item[{char}]{data}
\end{DoxyParamCaption}
)}\hypertarget{_node2_2_s_p_i_8c_a878ebc786a3f8d094f8afd5978d8769b}{}\label{_node2_2_s_p_i_8c_a878ebc786a3f8d094f8afd5978d8769b}
Function for testing S\+PI driver. 
\begin{DoxyParams}{Parameters}
{\em char} & data -\/ Data to send \\
\hline
\end{DoxyParams}


Definition at line 54 of file S\+P\+I.\+c.


\begin{DoxyCode}
54                         \{
55     \hyperlink{_node1_2_s_p_i_8c_afd9b09f58917f0e2d14c61b956eba214}{SPI\_init}();
56 
57     \textcolor{keywordflow}{while}(1) \{
58         \hyperlink{_node1_2_s_p_i_8c_abf767bd2a01130b1d7b907b9e8f4cd81}{SPI\_read\_write}(data);
59 
60     \}
61 \}\end{DoxyCode}
